<style>
    #ul_message {
        visibility: hidden;
    }

    .ulopt_input {
        width: 380px;
    }
    .ulogin-toggler .ulogin-toggler-button{
        color: gray;
        border-bottom: 1px dashed gray;
        display: inline-block;
        cursor: pointer;
    }
    .ulogin-toggler .ulogin-toggler-button span{
        line-height: 10px;
        display: inline-block;
        height: 10px;
    }
    .ulogin-toggler .ulogin-toggler-button.collapsed .ulogin-toggler-arrow{
        -webkit-transform: rotate(180deg);
        -moz-transform: rotate(180deg);
        -ms-transform: rotate(180deg);
        -o-transform: rotate(180deg);
        transform: rotate(180deg);
    }
    .ulogin-policy-text-preview{
        display: inline-block;
        vertical-align: top;
        padding: 4px 10px;
        margin-left: 20px;
    }
</style>
<script>
    function showMessage() {
        document.getElementById('ul_message').style.visibility = "visible";
    }
</script>
<div class="wrap">
    <h2>{HEADER_TXT}</h2>

    <p>
        {ABOUT_INSTRUCTION_PART_1}
        <a href="https://ulogin.ru/help.php#cms-wp" target="_blank">{ABOUT_INSTRUCTION_PART_2}</a>{ABOUT_INSTRUCTION_PART_3}
        <a href="{INSTALL_DETAILS}" target="popup" onclick="
        window.open(this.getAttribute('href'),'name','width=700,height=650,left='+((screen.width-700)/2)+',top='+((screen.height-650)/2));return false;
        ">{ABOUT_INSTRUCTION_PART_4}</a>{ABOUT_INSTRUCTION_PART_5}
    </p>

    <form name="uLoginSettingsForm" method="post" action="{URI}">
        <table class="form-table">
            <tbody>
            <tr>
                <th>
                    {LABEL_LOGIN_FORM_AVAILABLE}:
                </th>
                <td>
                    <label for="uloginLoginFormAvailable" class="ulopt_label">
                        <input class="ulopt_input" id="uloginLoginFormAvailable" name="loginFormAvailable" type="checkbox" {LOGIN_FORM_AVAILABLE_CHECKED} />
                        {DESCR_LOGIN_FORM_AVAILABLE}
                    </label>
                </td>
            </tr>
            <tr>
                <th>
                    <label for="uloginID1" class="ulopt_label">{LABEL_ULOGINID1_TXT}:</label>
                </th>
                <td>
                    <input class="ulopt_input" type="text" id="uloginID1" name="uloginID1" value="{ULOGINID1}"
                           maxlength="8"/>

                    <p class="description">{ULOGINID1_DESCR}</p>
                </td>
            </tr>
            <tr>
                <th>
                    {LABEL_COMMENT_FORM_AVAILABLE}:
                </th>
                <td>
                    <label for="uloginCommentFormAvailable" class="ulopt_label">
                        <input class="ulopt_input" id="uloginCommentFormAvailable" name="commentFormAvailable" type="checkbox" {COMMENT_FORM_AVAILABLE_CHECKED} />
                        {DESCR_COMMENT_FORM_AVAILABLE}
                    </label>
                </td>
            </tr>
            <tr>
                <th>
                    <label for="uloginID2" class="ulopt_label">{LABEL_ULOGINID2_TXT}:</label>
                </th>
                <td>
                    <input class="ulopt_input" type="text" id="uloginID2" name="uloginID2" value="{ULOGINID2}"
                           maxlength="8"/>

                    <p class="description">{ULOGINID2_DESCR}</p>
                </td>
            </tr>
            <tr>
                <th>
                    {LABEL_SYNC_FORM_AVAILABLE}:
                </th>
                <td>
                    <label for="uloginSyncFormAvailable" class="ulopt_label">
                        <input class="ulopt_input" id="uloginSyncFormAvailable" name="syncFormAvailable" type="checkbox" {SYNC_FORM_AVAILABLE_CHECKED} />
                        {DESCR_SYNC_FORM_AVAILABLE}
                    </label>
                </td>
            </tr>
            <tr>
                <th>
                    <label for="uloginID3" class="ulopt_label">{LABEL_ULOGINID3_TXT}:</label>
                </th>
                <td>
                    <input class="ulopt_input" type="text" id="uloginID3" name="uloginID3" value="{ULOGINID3}"
                           maxlength="8"/>

                    <p class="description">{ULOGINID3_DESCR}</p>
                </td>
            </tr>
            </tbody>
        </table>
        <br>
        <br>

        <h3>{H3_4_TXT}</h3>
        <table class="form-table">
            <tbody>
            <tr>
                <th>
                    {POLICY_CONFIRMATION_REQUIRED_LABEL}:
                </th>
                <td>
                    <label for="uloginPolicyConfirmationRequired" class="ulopt_label">
                        <input class="ulopt_input" id="uloginPolicyConfirmationRequired" name="policy_confirmation_required" type="checkbox" {POLICY_CONFIRMATION_REQUIRED_CHECKED} />
                        {POLICY_CONFIRMATION_REQUIRED_DESCR}
                    </label>
                </td>
            </tr>
            <tr id="uloginPolicyTextBox"{POLICY_CONFIRMATION_TEXT_VISIBLE}>
                <th>
                    <label for="uloginPolicyConfirmationText" class="ulopt_label">{POLICY_CONFIRMATION_TEXT_LABEL}:</label>
                </th>
                <td>
                    <textarea name="policy_confirmation_text" id="uloginPolicyConfirmationText" cols="80" rows="6">{POLICY_CONFIRMATION_TEXT_VALUE}</textarea>
                    <div id="uloginPolicyTextPreview" class="ulogin-policy-text-preview">{POLICY_CONFIRMATION_TEXT_VALUE}</div>
                    <p class="description">{POLICY_CONFIRMATION_TEXT_DESCR}</p>
                    <script>
                        (function($){
                            $(document).ready(function(){

                                $("#uloginPolicyConfirmationRequired").on('change', function(){
                                    if($(this).prop('checked')){
                                        $("#uloginPolicyTextBox").show();
                                    } else {
                                        $("#uloginPolicyTextBox").hide();
                                    }
                                });
                                $('#uloginPolicyConfirmationText').on('keyup', function(e){
                                    e.preventDefault();
                                    $("#uloginPolicyTextPreview").html($(this).val());
                                });

                            });
                        })(jQuery);
                    </script>
                </td>
            </tr>
            </tbody>
        </table>
        <br>
        <br>

        <h3>{H3_3_TXT}</h3>
        <table class="form-table">
            <tbody>
            <tr>
                <th>
                    <label for="uloginLabel" class="ulopt_label">{LABEL_LABEL_TXT}:</label>
                </th>
                <td>
                    <input class="ulopt_input" type="text" id="uloginLabel" name="uloginLabel" value="{LABEL}"/>

                    <p class="description">{LABEL_DESCR}</p>
                </td>
            </tr>
            <tr>
                <th>
                    {LABEL_SETURL_TXT}:
                </th>
                <td>
                    <label for="uloginSetUrl" class="ulopt_label">
                        <input class="ulopt_input" id="uloginSetUrl" name="uloginSetUrl" type="checkbox" {SETURL_CHECKED} />
                        {SETURL_DESCR}
                    </label>
                </td>
            </tr>
            <tr>
                <th>
                    {LABEL_NEW_USER_NOTIFICATION_TXT}:
                </th>
                <td>
                    <label for="ulogin_new_user_notification" class="ulopt_label">
                        <input class="ulopt_input" id="ulogin_new_user_notification" name="ulogin_new_user_notification" type="checkbox" {NEW_USER_NOTIFICATION_CHECKED} />
                        {NEW_USER_NOTIFICATION_DESCR}
                    </label>
                </td>
            </tr>

            <tr>
                <th>
                    {LABEL_SOCAVATAR_TXT}:
                </th>
                <td>
                    <label for="uloginSocAvatar" class="ulopt_label">
                        <input class="ulopt_input" id="uloginSocAvatar" name="uloginSocAvatar" type="checkbox" {SOCAVATAR_CHECKED} />
                        {SOCAVATAR_DESCR}
                    </label>
                </td>
            </tr>

            <tr>
                <th>
                    <label for="uloginBackurl" class="ulopt_label">{BACKURL_LABEL}:</label>
                </th>
                <td>
                    <input class="ulopt_input" type="text" id="uloginBackurl" name="uloginBackurl" value="{BACKURL_VALUE}"/>
                    <p class="description">{BACKURL_DESCR}</p>
                </td>
            </tr>

            <tr>
                <td></td>
            </tr>

            <tr class="ulogin-toggler">
                <th></th>
                <td>
                    <div id="showHiddenButton" class="ulogin-toggler-button">
                        Продвинутые настройки
                        <span class="ulogin-toggler-arrow"> ⌵</span>
                    </div>
                    <script>
                        (function($){
                            $(document).ready(function(){

                                $('#showHiddenButton').on('click', function(e){
                                    e.preventDefault();
                                    $(this).toggleClass('collapsed');
                                    $('.show-on-click').toggleClass('hidden');
                                });

                            });
                        })(jQuery);
                    </script>
                </td>
            </tr>

            <tr class="show-on-click hidden">
                <th>
                    {LABEL_ONLY_SSL}:
                </th>
                <td>
                    <label for="uloginOnlySsl" class="ulopt_label">
                        <input class="ulopt_input" id="uloginOnlySsl" name="uloginOnlySsl" type="checkbox" {ONLY_SSL_CHECKED}/>
                        {ONLY_SSL_DESCR}
                    </label>
                    <script>
                        (function($){
                            $(document).ready(function(){

                                var $uloginOnlySsl = $("#uloginOnlySsl");

                                $uloginOnlySsl.on('change', function(){
                                    if($uloginOnlySsl.prop('checked') === true) {
                                        $.get('https://' + location.hostname).fail(function (response, message) {
                                            if (confirm('{ONLY_SSL_CONFIRM}')) {
                                                $uloginOnlySsl.prop('checked', true);
                                            } else {
                                                $uloginOnlySsl.prop('checked', false);
                                            }
                                        })
                                    }
                                });

                            });
                        })(jQuery);
                    </script>
                </td>
            </tr>

            <tr class="show-on-click hidden">
                <th>
                    <label for="uloginForceFields" class="ulopt_label">{LABEL_FORCE_FIELDS}:</label>
                </th>
                <td>
                    <input class="ulopt_input" id="uloginForceFields" name="uloginForceFields" type="text" value="{FORCE_FIELDS_VALUE}" />
                    <p class="description">{FORCE_FIELDS_DESCR}</p>
                </td>
            </tr>

            <tr class="show-on-click hidden">
                <th>
                    <label for="uloginPopupCss" class="ulopt_label">{LABEL_POPUP_CSS}:</label>
                </th>
                <td>
                    <input class="ulopt_input" id="uloginPopupCss" name="uloginPopupCss" type="text" value="{POPUP_CSS_VALUE}" />
                    <p class="description">{POPUP_CSS_DESCR}</p>
                </td>
            </tr>

            </tbody>
        </table>

        <p class="submit">
            <input type="submit" name="update_uLoginPluginSettings" id="update_uLoginPluginSettings"
                   class="button button-primary" value="{BUTTON_VALUE}" onclick="showMessage();"/>
            <span id="ul_message" class="ulopt_label">{SPAN_TXT}</span>
        </p>
    </form>

</div>